<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ë¦¬í¬íŠ¸ í™•ì¸</title>
  <style>
    body { font-family: sans-serif; margin: 20px; }
    #reportContent, .title-bar, .footer {
      page-break-inside: avoid;
    }

    /* ìµœìƒë‹¨ PDF ë‹¤ìš´ë¡œë“œ ë§í¬ */
    .top-bar {
      display: flex;
      justify-content: flex-end;
      margin-bottom: 15px;
    }
    .download-link {
      font-size: 14px;
      text-decoration: none;
      color: blue;
    }

    /* ì œëª© + ë¡œê³  */
    .title-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }


  </style>
  <!-- html2pdf.js CDN ì¶”ê°€ -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js"></script>
</head>

<body>
  <div class="app" id="reportArea">

    <!-- ğŸ”¹ PDF ë‹¤ìš´ë¡œë“œ ë§í¬ (ë§¨ ìœ„ ì˜¤ë¥¸ìª½) -->
    <div class="top-bar">
      <a href="#" id="downloadPdf" class="download-link">ğŸ“„ PDF ë‹¤ìš´ë¡œë“œ</a>
    </div>

    <!-- ğŸ”¹ ì œëª© ì™¼ìª½, ë¡œê³  ì˜¤ë¥¸ìª½ -->
    <div class="title-bar">
      <h1 style="margin:0;">ê¸°ì—…ì‹ ìš© ë¦¬ìŠ¤í¬ ë³´ê³ ì„œ</h1>
      <img src="/static/images/boosilping4.png" alt="ë¡œê³ " style="height:40px;">
    </div>

    
    <!-- ë¦¬í¬íŠ¸ ë³¸ë¬¸ -->
    <div id="reportContent">ë¡œë”© ì¤‘...</div>


    <!-- ğŸ”¹ í‘¸í„° -->
    <div class="footer" style="text-align:center; margin-top:50px; margin-bottom:50px;">
      Â© <span id="year"></span> Catch Boosil Ping
    </div>

    <script>
      // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ë¦¬í¬íŠ¸ ë¶ˆëŸ¬ì˜¤ê¸°
      const report = localStorage.getItem("latestReport");
      document.getElementById("reportContent").innerText =
        report || "âš ï¸ ì €ì¥ëœ ë¦¬í¬íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.";

      // PDF ë‹¤ìš´ë¡œë“œ ì´ë²¤íŠ¸ (html2pdf.js ì‚¬ìš©)
      document.getElementById("downloadPdf").addEventListener("click", (e) => {
        e.preventDefault();
        const element = document.getElementById("reportArea");

        const opt = {
        margin: 0.5,
        filename: 'report.pdf',
        image: { type: 'jpeg', quality: 0.98 },
        html2canvas: { scale: 2 },
        jsPDF: { unit: 'in', format: 'a4', orientation: 'portrait' },
        pagebreak: { mode: ['avoid-all', 'css', 'legacy'] }  // âœ… ì¶”ê°€
      };

      html2pdf().set(opt).from(element).save();

      });
      
    </script>
  </div>
</body>
</html>
